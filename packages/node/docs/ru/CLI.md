# CLI

Пакет `@xmihome/node` включает в себя интерфейс командной строки (CLI)
для управления вашими устройствами Xiaomi. Он помогает с аутентификацией
и обнаружением устройств.

## Команды

CLI поддерживает две основные команды: `login` и `devices`.

### `login`

Эта команда позволяет в интерактивном режиме войти в Xiaomi Cloud.
Успешная аутентификация сохранит ваши учетные данные в локальный файл
(`~/.config/xmihome/credentials.json`) для будущего использования.

**Использование:**

```bash
xmihome login [options]
```

**Опции:**

- `-u, --username`: Имя пользователя вашего аккаунта Xiaomi (email, телефон или ID).
- `-p, --password`: Пароль от вашего аккаунта Xiaomi.
- `-c, --country`: Код страны вашего аккаунта (например, `ru`, `us`, `cn`).

Если вы запустите команду без опций, она предложит вам ввести их
в интерактивном режиме. CLI также поддерживает двухфакторную
аутентификацию (2FA), запрашивая код, отправленный на ваше устройство.

### `devices`

Эта команда выводит список всех ваших устройств, обнаруживая их в локальной
сети (miIO и Bluetooth) и/или в Xiaomi Cloud.

**Использование:**

```bash
xmihome devices [options]
```

**Опции:**

- `--type`: Указывает тип обнаружения.
  - `all`: (По умолчанию) Обнаруживает устройства из всех доступных источников.
  - `miio`: Обнаруживает только устройства miIO (Wi-Fi) в локальной сети.
  - `bluetooth`: Обнаруживает только устройства Bluetooth LE поблизости.
  - `cloud`: Загружает список устройств из Xiaomi Cloud (требуется вход в систему).
- `--force`: Принудительно запускает новое обнаружение, игнорируя
    кэшированные результаты. CLI кэширует списки устройств для ускорения
    последующих вызовов.

**Глобальные опции:**

- `--verbose`: Запускает команду с подробным логированием, что полезно
    для отладки.
- `-h, --help`: Показывает справочное сообщение.
- `-v, --version`: Показывает версию пакета.
